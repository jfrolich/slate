!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("slate"),require("immutable")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","slate","immutable"],t):t(e.SlateReact={},e.React,e.ReactDOM,e.Slate,e.Immutable)}(this,function(e,t,n,r,o){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var a="default"in n?n.default:n,i="default"in o?o.default:o,s="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var l=u,d=c;function f(e){if(l===setTimeout)return setTimeout(e,0);if((l===u||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}"function"==typeof s.setTimeout&&(l=setTimeout),"function"==typeof s.clearTimeout&&(d=clearTimeout);var p,h=[],v=!1,y=-1;function m(){v&&p&&(v=!1,p.length?h=p.concat(h):y=-1,h.length&&g())}function g(){if(!v){var e=f(m);v=!0;for(var t=h.length;t;){for(p=h,h=[];++y<t;)p&&p[y].run();y=-1,t=h.length}p=null,v=!1,function(e){if(d===clearTimeout)return clearTimeout(e);if((d===c||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}b.prototype.run=function(){this.fun.apply(null,this.array)};function C(){}var w=C,k=C,O=C,E=C,x=C,T=C,S=C;var N=s.performance||{},D=N.now||N.mozNow||N.msNow||N.oNow||N.webkitNow||function(){return(new Date).getTime()};var F=new Date;var R={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new b(e,t)),1!==h.length||v||f(g)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:w,addListener:k,once:O,off:E,removeListener:x,removeAllListeners:T,emit:S,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*D.call(N),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-F)/1e3}},P="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function A(e,t){return e(t={exports:{}},t.exports),t.exports}var I=1e3,j=60*I,B=60*j,L=24*B,_=365.25*L,M=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*_;case"days":case"day":case"d":return n*L;case"hours":case"hour":case"hrs":case"hr":case"h":return n*B;case"minutes":case"minute":case"mins":case"min":case"m":return n*j;case"seconds":case"second":case"secs":case"sec":case"s":return n*I;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?q(n=e,L,"day")||q(n,B,"hour")||q(n,j,"minute")||q(n,I,"second")||n+" ms":function(e){if(e>=L)return Math.round(e/L)+"d";if(e>=B)return Math.round(e/B)+"h";if(e>=j)return Math.round(e/j)+"m";if(e>=I)return Math.round(e/I)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function q(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var K=A(function(e,t){function n(e){var n;function o(){if(o.enabled){var e=o,r=+new Date,a=r-(n||r);e.diff=a,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var a=i[u];n=o.call(e,a),i.splice(u,1),u--}return n}),t.formatArgs.call(e,i),(o.log||t.log||console.log.bind(console)).apply(e,i)}}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),o.destroy=r,"function"==typeof t.init&&t.init(o),t.instances.push(o),o}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=M,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),U=(K.coerce,K.disable,K.enable,K.enabled,K.humanize,K.instances,K.names,K.skips,K.formatters,A(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==R&&"env"in R&&(e=R.env.DEBUG),e}(t=e.exports=K).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}));U.log,U.formatArgs,U.save,U.load,U.useColors,U.storage,U.colors;function V(e){return function(){return e}}var W=function(){};W.thatReturns=V,W.thatReturnsFalse=V(!1),W.thatReturnsTrue=V(!0),W.thatReturnsNull=V(null),W.thatReturnsThis=function(){return this},W.thatReturnsArgument=function(e){return e};var z=W;var H=function(e,t,n,r,o,a,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,i,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},J="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$=A(function(e){e.exports=function(){function e(e,t,n,r,o,a){a!==J&&H(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=z,n.PropTypes=n,n}()}),X=!("undefined"==typeof window||!window.document||!window.document.createElement),G=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Y=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t.Component),G(n,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return X?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),a.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),n}();Y.propTypes={children:$.node.isRequired,node:$.any};var Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Q=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t.Component),Z(n,[{key:"componentDidMount",value:function(){this.renderPortal()}},{key:"componentDidUpdate",value:function(e){this.renderPortal()}},{key:"componentWillUnmount",value:function(){a.unmountComponentAtNode(this.defaultNode||this.props.node),this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null,this.portal=null}},{key:"renderPortal",value:function(e){this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode));var n=this.props.children;"function"==typeof this.props.children.type&&(n=t.cloneElement(this.props.children)),this.portal=a.unstable_renderSubtreeIntoContainer(this,n,this.props.node||this.defaultNode)}},{key:"render",value:function(){return null}}]),n}();Q.propTypes={children:$.node.isRequired,node:$.any};var ee=a.createPortal?Y:Q,te=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ne=27,re=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.portalNode=null,t.state={active:!!e.defaultOpen},t.openPortal=t.openPortal.bind(t),t.closePortal=t.closePortal.bind(t),t.wrapWithPortal=t.wrapWithPortal.bind(t),t.handleOutsideMouseClick=t.handleOutsideMouseClick.bind(t),t.handleKeydown=t.handleKeydown.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t.Component),te(n,[{key:"componentDidMount",value:function(){this.props.closeOnEsc&&document.addEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&document.addEventListener("click",this.handleOutsideMouseClick)}},{key:"componentWillUnmount",value:function(){this.props.closeOnEsc&&document.removeEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&document.removeEventListener("click",this.handleOutsideMouseClick)}},{key:"openPortal",value:function(e){this.state.active||(e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),this.setState({active:!0},this.props.onOpen))}},{key:"closePortal",value:function(){this.state.active&&this.setState({active:!1},this.props.onClose)}},{key:"wrapWithPortal",value:function(e){var n=this;return this.state.active?t.createElement(ee,{node:this.props.node,key:"react-portal",ref:function(e){return n.portalNode=e}},e):null}},{key:"handleOutsideMouseClick",value:function(e){if(this.state.active){var t=this.portalNode.props.node||this.portalNode.defaultNode;!t||t.contains(e.target)||e.button&&0!==e.button||this.closePortal()}}},{key:"handleKeydown",value:function(e){e.keyCode===ne&&this.state.active&&this.closePortal()}},{key:"render",value:function(){return this.props.children({openPortal:this.openPortal,closePortal:this.closePortal,portal:this.wrapWithPortal,isOpen:this.state.active})}}]),n}();function oe(e,t){function n(n,r,o,a,i){var s=r[o];return null!=s||n?null==s&&n?new Error("The "+i+" `"+o+"` is marked as required in `"+a+"`, but it was not supplied."):t(s)?null:new Error("Invalid "+i+" `"+o+"` supplied to `"+a+"`, expected a Slate `"+e+"` but received: "+s):null}function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!1].concat(t))}return r.isRequired=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!0].concat(t))},r}re.propTypes={children:$.func.isRequired,defaultOpen:$.bool,node:$.any,openByClickOn:$.element,closeOnEsc:$.bool,closeOnOutsideClick:$.bool,onOpen:$.func,onClose:$.func},re.defaultProps={onOpen:function(){},onClose:function(){}};var ae={block:oe("Block",function(e){return r.Block.isBlock(e)}),blocks:oe("List<Block>",function(e){return r.Block.isBlockList(e)}),change:oe("Change",function(e){return r.Change.isChange(e)}),character:oe("Character",function(e){return r.Character.isCharacter(e)}),characters:oe("List<Character>",function(e){return r.Character.isCharacterList(e)}),data:oe("Data",function(e){return r.Data.isData(e)}),document:oe("Document",function(e){return r.Document.isDocument(e)}),history:oe("History",function(e){return r.History.isHistory(e)}),inline:oe("Inline",function(e){return r.Inline.isInline(e)}),inlines:oe("Inline",function(e){return r.Inline.isInlineList(e)}),leaf:oe("Leaf",function(e){return r.Leaf.isLeaf(e)}),leaves:oe("List<Leaf>",function(e){return r.Leaf.isLeafList(e)}),mark:oe("Mark",function(e){return r.Mark.isMark(e)}),marks:oe("Set<Mark>",function(e){return r.Mark.isMarkSet(e)}),node:oe("Node",function(e){return r.Node.isNode(e)}),nodes:oe("List<Node>",function(e){return r.Node.isNodeList(e)}),range:oe("Range",function(e){return r.Range.isRange(e)}),ranges:oe("List<Range>",function(e){return r.Range.isRangeList(e)}),schema:oe("Schema",function(e){return r.Schema.isSchema(e)}),stack:oe("Stack",function(e){return r.Stack.isStack(e)}),value:oe("Value",function(e){return r.Value.isValue(e)}),text:oe("Text",function(e){return r.Text.isText(e)}),texts:oe("List<Text>",function(e){return r.Text.isTextList(e)})};function ie(e){return function(){return e}}var se=function(){};se.thatReturns=ie,se.thatReturnsFalse=ie(!1),se.thatReturnsTrue=ie(!0),se.thatReturnsNull=ie(null),se.thatReturnsThis=function(){return this},se.thatReturnsArgument=function(e){return e};var ue=se;var ce=function(e,t,n,r,o,a,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,i,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},le="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",de=A(function(e){e.exports=function(){function e(e,t,n,r,o,a){a!==le&&ce(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=ue,n.PropTypes=n,n}()}),fe=void 0!==s?s:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function pe(){throw new Error("setTimeout has not been defined")}function he(){throw new Error("clearTimeout has not been defined")}var ve=pe,ye=he;function me(e){if(ve===setTimeout)return setTimeout(e,0);if((ve===pe||!ve)&&setTimeout)return ve=setTimeout,setTimeout(e,0);try{return ve(e,0)}catch(t){try{return ve.call(null,e,0)}catch(t){return ve.call(this,e,0)}}}"function"==typeof fe.setTimeout&&(ve=setTimeout),"function"==typeof fe.clearTimeout&&(ye=clearTimeout);var ge,be=[],Ce=!1,we=-1;function ke(){Ce&&ge&&(Ce=!1,ge.length?be=ge.concat(be):we=-1,be.length&&Oe())}function Oe(){if(!Ce){var e=me(ke);Ce=!0;for(var t=be.length;t;){for(ge=be,be=[];++we<t;)ge&&ge[we].run();we=-1,t=be.length}ge=null,Ce=!1,function(e){if(ye===clearTimeout)return clearTimeout(e);if((ye===he||!ye)&&clearTimeout)return ye=clearTimeout,clearTimeout(e);try{ye(e)}catch(t){try{return ye.call(null,e)}catch(t){return ye.call(this,e)}}}(e)}}function Ee(e,t){this.fun=e,this.array=t}Ee.prototype.run=function(){this.fun.apply(null,this.array)};function xe(){}var Te=xe,Se=xe,Ne=xe,De=xe,Fe=xe,Re=xe,Pe=xe;var Ae=fe.performance||{},Ie=Ae.now||Ae.mozNow||Ae.msNow||Ae.oNow||Ae.webkitNow||function(){return(new Date).getTime()};var je=new Date;var Be={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];be.push(new Ee(e,t)),1!==be.length||Ce||me(Oe)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Te,addListener:Se,once:Ne,off:De,removeListener:Fe,removeAllListeners:Re,emit:Pe,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Ie.call(Ae),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-je)/1e3}},Le=Be&&Be.env&&Be.env.FORBID_DEPRECATIONS,_e=void 0!==Be&&Be.env&&!0,Me="undefined"!=typeof console&&"function"==typeof console.log&&"function"==typeof console.warn&&"function"==typeof console.error;function qe(e,t){if(_e&&Me){for(var n,r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(n=console)[e].apply(n,[t].concat(o))}}var Ke={deprecate:function(e,t){if(Le)throw new Error("Deprecation ("+e+"): "+t);for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];qe.apply(void 0,["warn","Deprecation ("+e+"): "+t].concat(r))},error:function(e){if(Me){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).error.apply(t,[e].concat(r))}},warn:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];qe.apply(void 0,["warn","Warning: "+e].concat(n))}},Ue=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onPaste","onSelect"],Ve=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},We=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ze=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Xe=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ge=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Ye=[].concat(Ge(Ue),["decorateNode","onChange","renderEditor","renderMark","renderNode","renderPlaceholder","renderPortal","schema","validateNode"]),Ze=self.atob.bind(self),Qe=self.btoa.bind(self);function et(e){var t=JSON.stringify(e);return Qe(encodeURIComponent(t))}function tt(e){var t=decodeURIComponent(Ze(e));return JSON.parse(t)}var nt={deserialize:function(e,t){var n=tt(e);return r.Value.fromJSON(n,t)},deserializeNode:function(e,t){var n=tt(e);return r.Node.fromJSON(n,t)},serialize:function(e,t){return et(e.toJSON(t))},serializeNode:function(e,t){return et(e.toJSON(t))}},rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ot(e){return"document"==e.object||"block"==e.object&&r.Block.isBlockList(e.nodes)?e.nodes.map(ot).join("\n"):e.text}var at={deserialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultBlock,a=void 0===n?"line":n,i=t.defaultMarks,s=void 0===i?[]:i,u=t.toJSON,c=void 0!==u&&u;o.Set.isSet(s)&&(s=s.toArray()),a=r.Node.createProperties(a),s=s.map(r.Mark.createProperties);var l={object:"value",document:{object:"document",data:{},nodes:e.split("\n").map(function(e){return rt({},a,{object:"block",isVoid:!1,data:{},nodes:[{object:"text",leaves:[{object:"leaf",text:e,marks:s}]}]})})}};return c?l:r.Value.fromJSON(l)},serialize:function(e){return ot(e.document)}},it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st="object"===("undefined"==typeof window?"undefined":it(window))&&"object"===("undefined"==typeof document?"undefined":it(document))&&9===document.nodeType,ut=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ct=void 0,lt={},dt=void 0;if(st){var ft=window.navigator.userAgent,pt=!0,ht=!1,vt=void 0;try{for(var yt,mt=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(pt=(yt=mt.next()).done);pt=!0){var gt=ut(yt.value,2),bt=gt[0];if(gt[1].test(ft)){ct=bt;break}}}catch(e){ht=!0,vt=e}finally{try{!pt&&mt.return&&mt.return()}finally{if(ht)throw vt}}var Ct=!0,wt=!1,kt=void 0;try{for(var Ot,Et=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(Ct=(Ot=Et.next()).done);Ct=!0){var xt=ut(Ot.value,2),Tt=xt[0];if(xt[1].test(ft)){dt=Tt;break}}}catch(e){wt=!0,kt=e}finally{try{!Ct&&Et.return&&Et.return()}finally{if(wt)throw kt}}var St=window.document.createElement("div");St.contentEditable=!0;var Nt=!0,Dt=!1,Ft=void 0;try{for(var Rt,Pt=[["beforeinput",function(e){return"onbeforeinput"in e}]][Symbol.iterator]();!(Nt=(Rt=Pt.next()).done);Nt=!0){var At=ut(Rt.value,2),It=At[0],jt=At[1];lt[It]=jt(St)}}catch(e){Dt=!0,Ft=e}finally{try{!Nt&&Pt.return&&Pt.return()}finally{if(Dt)throw Ft}}}var Bt="firefox"===ct,Lt="safari"===ct,_t="ie"===ct,Mt="edge"===ct,qt="android"===dt,Kt="ios"===dt,Ut="macos"===dt,Vt=lt,Wt=function e(t){if(Ht(t))return t;if(Ht(t.ownerDocument))return t.ownerDocument;if(Ht(t.document))return t.document;if(t.parentNode)return e(t.parentNode);if(t.commonAncestorContainer)return e(t.commonAncestorContainer);if(t.startContainer)return e(t.startContainer);if(t.anchorNode)return e(t.anchorNode)},zt=9;function Ht(e){return e&&e.nodeType===zt}var Jt=!1,$t=function(e){if(t=e,t&&t.window===t)return e;var t;var n=Wt(e);if(Jt){n.parentWindow.execScript("document._parentWindow = window;","Javascript");var r=n._parentWindow;return n._parentWindow=null,r}return n.defaultView||n.parentWindow};var Xt,Gt=A(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:"undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)o["f"+a]=111+a;function i(e,t,n){!t||"byKey"in t||(n=t,t=null);var r=s(e,t);return null==n?function(e){return u(r,e)}:u(r,n)}function s(e,t){var r=t&&t.byKey,o={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var s in n)o[n[s]]=!1;var u=!0,d=!1,f=void 0;try{for(var p,h=a[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var v=p.value,y=l(v),m=n[y];1!=i&&m||(r?o.key=y:o.which=c(v)),m&&(o[m]=!0),1==i&&!m&&r&&(o.shiftKey=null)}}catch(e){d=!0,f=e}finally{try{!u&&h.return&&h.return()}finally{if(d)throw f}}return o}function u(e,t){for(var n in e){var r=e[n];if(null!=r&&("key"==n?t.key.toLowerCase():"which"==n?91==r&&93==t.which?91:t.which:t[n])!=r)return!1}return!0}function c(e){return e=l(e),o[e]||e.toUpperCase().charCodeAt(0)}function l(e){return e=e.toLowerCase(),e=r[e]||e}t.default=i,t.isHotkey=i,t.isCodeHotkey=function(e,t){return i(e,t)},t.isKeyHotkey=function(e,t){return i(e,{byKey:!0},t)},t.parseHotkey=s,t.compareHotkey=u,t.toKeyCode=c,t.toKeyName=l});(Xt=Gt)&&Xt.__esModule&&Object.prototype.hasOwnProperty.call(Xt,"default")&&Xt.default;Gt.isHotkey,Gt.isCodeHotkey;var Yt=Gt.isKeyHotkey,Zt=(Gt.parseHotkey,Gt.compareHotkey,Gt.toKeyCode,Gt.toKeyName,Kt||Ut),Qt=Yt("mod+b"),en=Yt("mod+i"),tn=Yt("enter"),nn=Yt("shift+enter"),rn=function(e){return tn(e)||nn(e)},on=Yt("backspace"),an=Yt("shift+backspace"),sn=Yt("delete"),un=Yt("shift+delete"),cn=Yt("ctrl+h"),ln=Yt("ctrl+d"),dn=function(e){return function(e){return on(e)||an(e)}(e)||Zt&&cn(e)},fn=function(e){return function(e){return sn(e)||un(e)}(e)||Zt&&ln(e)},pn=Yt("ctrl+k"),hn=function(e){return Zt&&function(e){return Yt("cmd+shift+backspace",e)||Yt("cmd+backspace",e)}(e)},vn=function(e){return Zt&&pn(e)},yn=Yt("ctrl+backspace"),mn=Yt("ctrl+delete"),gn=function(e){return Zt?function(e){return Yt("shift+option+backspace",e)||Yt("option+backspace",e)}(e):yn(e)},bn=function(e){return Zt?function(e){return Yt("shift+option+delete",e)||Yt("option+delete",e)}(e):mn(e)},Cn=Yt("shift+right"),wn=Yt("shift+left"),kn=Yt("right"),On=Yt("left"),En=Yt("option+up"),xn=Yt("option+down"),Tn=Yt("option+shift+up"),Sn=Yt("option+shift+down"),Nn=Yt("mod+z"),Dn=Yt("mod+shift+z"),Fn=Yt("mod+y"),Rn=function(e){return Zt?Dn(e):Fn(e)},Pn=Yt("ctrl+t"),An={isBold:Qt,isCollapseCharBackward:function(e){return On(e)&&!wn(e)},isCollapseCharForward:function(e){return kn(e)&&!Cn(e)},isCollapseLineBackward:function(e){return Zt&&En(e)},isCollapseLineForward:function(e){return Zt&&xn(e)},isComposing:function(e){return"ArrowDown"==e.key||"ArrowLeft"==e.key||"ArrowRight"==e.key||"ArrowUp"==e.key||"Backspace"==e.key||"Enter"==e.key},isContentEditable:function(e){return Qt(e)||dn(e)||fn(e)||hn(e)||vn(e)||gn(e)||bn(e)||en(e)||Rn(e)||rn(e)||function(e){return Zt&&Pn(e)}(e)||Nn(e)},isDeleteCharBackward:dn,isDeleteCharForward:fn,isDeleteLineBackward:hn,isDeleteLineForward:vn,isDeleteWordBackward:gn,isDeleteWordForward:bn,isExtendCharBackward:wn,isExtendCharForward:Cn,isExtendLineBackward:function(e){return Zt&&Tn(e)},isExtendLineForward:function(e){return Zt&&Sn(e)},isItalic:en,isRedo:Rn,isSplitBlock:rn,isUndo:Nn};var In=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},jn="object"==typeof P&&P&&P.Object===Object&&P,Bn="object"==typeof self&&self&&self.Object===Object&&self,Ln=jn||Bn||Function("return this")(),_n=function(){return Ln.Date.now()},Mn=Ln.Symbol,qn=Object.prototype,Kn=qn.hasOwnProperty,Un=qn.toString,Vn=Mn?Mn.toStringTag:void 0;var Wn=function(e){var t=Kn.call(e,Vn),n=e[Vn];try{e[Vn]=void 0;var r=!0}catch(e){}var o=Un.call(e);return r&&(t?e[Vn]=n:delete e[Vn]),o},zn=Object.prototype.toString;var Hn=function(e){return zn.call(e)},Jn="[object Null]",$n="[object Undefined]",Xn=Mn?Mn.toStringTag:void 0;var Gn=function(e){return null==e?void 0===e?$n:Jn:Xn&&Xn in Object(e)?Wn(e):Hn(e)};var Yn=function(e){return null!=e&&"object"==typeof e},Zn="[object Symbol]";var Qn=function(e){return"symbol"==typeof e||Yn(e)&&Gn(e)==Zn},er=NaN,tr=/^\s+|\s+$/g,nr=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,or=/^0o[0-7]+$/i,ar=parseInt;var ir=function(e){if("number"==typeof e)return e;if(Qn(e))return er;if(In(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=In(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(tr,"");var n=rr.test(e);return n||or.test(e)?ar(e.slice(2),n?2:8):nr.test(e)?er:+e},sr="Expected a function",ur=Math.max,cr=Math.min;var lr=function(e,t,n){var r,o,a,i,s,u,c=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(sr);function p(t){var n=r,a=o;return r=o=void 0,c=t,i=e.apply(a,n)}function h(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=a}function v(){var e=_n();if(h(e))return y(e);s=setTimeout(v,function(e){var n=t-(e-u);return d?cr(n,a-(e-c)):n}(e))}function y(e){return s=void 0,f&&r?p(e):(r=o=void 0,i)}function m(){var e=_n(),n=h(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(v,t),l?p(e):i}(u);if(d)return s=setTimeout(v,t),p(u)}return void 0===s&&(s=setTimeout(v,t)),i}return t=ir(t)||0,In(n)&&(l=!!n.leading,a=(d="maxWait"in n)?ur(ir(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},m.flush=function(){return void 0===s?i:y(_n())},m},dr="Expected a function";var fr=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(dr);return In(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),lr(e,t,{leading:r,maxWait:t,trailing:o})},pr="<<anonymous>>";function hr(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof i.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function vr(e){function t(t,n,r,o,a,i){for(var s=arguments.length,u=Array(s>6?s-6:0),c=6;c<s;c++)u[c-6]=arguments[c];return i=i||r,o=o||pr,null!=n[r]?e.apply(void 0,[n,r,o,a,i].concat(u)):t?new Error("Required "+a+" `"+i+"` was not specified in `"+o+"`."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function yr(e,t){return vr(function(n,r,o,a,i){var s=n[r];if(!t(s)){var u=hr(s);return new Error("Invalid "+a+" `"+i+"` of type `"+u+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function mr(e,t,n){return vr(function(r,o,a,i,s){for(var u=arguments.length,c=Array(u>5?u-5:0),l=5;l<u;l++)c[l-5]=arguments[l];var d=r[o];if(!n(d)){var f=i,p=hr(d);return new Error("Invalid "+f+" `"+s+"` of type `"+p+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+s+"`, expected a function.");for(var h=d.toArray(),v=0,y=h.length;v<y;v++){var m=e.apply(void 0,[h,v,a,i,s+"["+v+"]"].concat(c));if(m instanceof Error)return m}})}function gr(e,t,n,r){return vr(function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return mr(e,n,r).apply(void 0,a)||t&&(s=t,vr(function(e,t,n,r,o){for(var a=arguments.length,i=Array(a>5?a-5:0),u=5;u<a;u++)i[u-5]=arguments[u];var c=e[t];if("function"!=typeof s)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+o+"`, expected a function.");for(var l=c.keySeq().toArray(),d=0,f=l.length;d<f;d++){var p=s.apply(void 0,[l,d,n,r,o+" -> key("+l[d]+")"].concat(i));if(p instanceof Error)return p}})).apply(void 0,a);var s})}function br(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?i.Iterable.isIterable:arguments[2];return vr(function(r,o,a,i,s){for(var u=arguments.length,c=Array(u>5?u-5:0),l=5;l<u;l++)c[l-5]=arguments[l];var d=r[o];if(!n(d)){var f=hr(d);return new Error("Invalid "+i+" `"+s+"` of type `"+f+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var p=d.toObject();for(var h in e){var v=e[h];if(v){var y=v.apply(void 0,[p,h,a,i,s+"."+h].concat(c));if(y)return y}}})}function Cr(e){return br(e)}var wr={listOf:function(e){return mr(e,"List",i.List.isList)},mapOf:function(e,t){return gr(e,t,"Map",i.Map.isMap)},orderedMapOf:function(e,t){return gr(e,t,"OrderedMap",i.OrderedMap.isOrderedMap)},setOf:function(e){return mr(e,"Set",i.Set.isSet)},orderedSetOf:function(e){return mr(e,"OrderedSet",i.OrderedSet.isOrderedSet)},stackOf:function(e){return mr(e,"Stack",i.Stack.isStack)},iterableOf:function(e){return mr(e,"Iterable",i.Iterable.isIterable)},recordOf:function(e){return vr(function(t,n,r,o,a){for(var s=arguments.length,u=Array(s>5?s-5:0),c=5;c<s;c++)u[c-5]=arguments[c];var l=t[n];if(!(l instanceof i.Record)){var d=hr(l),f=o;return new Error("Invalid "+f+" `"+a+"` of type `"+d+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var p in e){var h=e[p];if(h){var v=l.toObject(),y=h.apply(void 0,[v,p,r,o,a+"."+p].concat(u));if(y)return y}}})},shape:Cr,contains:Cr,mapContains:function(e){return br(e,"Map",i.Map.isMap)},list:yr("List",i.List.isList),map:yr("Map",i.Map.isMap),orderedMap:yr("OrderedMap",i.OrderedMap.isOrderedMap),set:yr("Set",i.Set.isSet),orderedSet:yr("OrderedSet",i.OrderedSet.isOrderedSet),stack:yr("Stack",i.Stack.isStack),seq:yr("Seq",i.Seq.isSeq),record:yr("Record",function(e){return e instanceof i.Record}),iterable:yr("Iterable",i.Iterable.isIterable)},kr=/^([\w-]+)(?::(\d+))?$/;var Or={parse:function(e){var t=kr.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=Xe(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},Er=U("slate:leaves"),xr=function(e){function n(){var e,t,r;Ve(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=$e(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),Tr.call(r),$e(r,t)}return Je(n,e),We(n,[{key:"shouldComponentUpdate",value:function(e){return e.index!=this.props.index||e.marks!=this.props.marks||e.text!=this.props.text||e.parent!=this.props.parent}},{key:"render",value:function(){this.debug("render",this);var e=this.props,n=e.node,r=e.index,o=Or.stringify({key:n.key,index:r});return t.createElement("span",{"data-offset-key":o},this.renderMarks())}},{key:"renderMarks",value:function(){var e=this.props,t=e.marks,n=e.node,r=e.offset,o=e.text,a=e.editor,i=a.stack,s=this.renderText(),u={"data-slate-leaf":!0};return t.reduce(function(e,s){var c={editor:a,mark:s,marks:t,node:n,offset:r,text:o,children:e,attributes:u};return i.find("renderMark",c)||e},s)}},{key:"renderText",value:function(){var e=this.props,n=e.block,r=e.node,o=e.parent,a=e.text,i=e.index,s=e.leaves;if(o.isVoid)return t.createElement("span",{"data-slate-zero-width":"z"},"​");if(""===a&&"block"===o.object&&""===o.text&&1===o.nodes.size)return t.createElement("span",{"data-slate-zero-width":"n"},"​");if(""===a)return t.createElement("span",{"data-slate-zero-width":"z"},"​");var u=n.getLastText(),c=a.charAt(a.length-1),l=r===u,d=i===s.size-1;return l&&d&&"\n"===c?a+"\n":a}}]),n}(t.Component);xr.propTypes={block:ae.block.isRequired,editor:de.object.isRequired,index:de.number.isRequired,leaves:ae.leaves.isRequired,marks:ae.marks.isRequired,node:ae.node.isRequired,offset:de.number.isRequired,parent:ae.node.isRequired,text:de.string.isRequired};var Tr=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Er.apply(void 0,[t,e.props.node.key+"-"+e.props.index].concat(r))}},Sr=U("slate:node"),Nr=function(e){function n(){var e,t,r;Ve(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=$e(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),Dr.call(r),$e(r,t)}return Je(n,e),We(n,[{key:"render",value:function(){var e=this;this.debug("render",this);var n=this.props,o=n.decorations,a=n.editor,i=n.node,s=n.style,u=a.value.document,c=i.key,l=o.filter(function(e){var t=e.startKey,n=e.endKey,o=e.startPath,a=e.endPath;if(t===c||n===c)return!0;if(t===n)return!1;var i=u.assertPathByKey(c);return-1!==r.PathUtils.compare(i,o)&&1!==r.PathUtils.compare(i,a)}),d=0===l.size?i.getLeaves():i.getLeaves(l),f=0,p=d.map(function(t,n){var r=e.renderLeaf(d,t,n,f);return f+=t.text.length,r});return t.createElement("span",{"data-key":c,style:s},p)}}]),n}(t.Component);Nr.propTypes={block:ae.block,decorations:wr.list.isRequired,editor:de.object.isRequired,node:ae.node.isRequired,parent:ae.node.isRequired,style:de.object},Nr.defaultProps={style:null};var Dr=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node.key;Sr.apply(void 0,[t,a+" (text)"].concat(r))},this.shouldComponentUpdate=function(t){var n=t,r=e.props;if(n.node!=r.node)return!0;if("block"==n.parent.object){var o=r.parent.nodes.last(),a=n.parent.nodes.last();if(r.node==o&&n.node!=a)return!0}return!n.decorations.equals(r.decorations)},this.renderLeaf=function(n,r,o,a){var i=e.props,s=i.block,u=i.node,c=i.parent,l=i.editor,d=r.text,f=r.marks;return t.createElement(xr,{key:u.key+"-"+o,block:s,editor:l,index:o,marks:f,node:u,offset:a,parent:c,leaves:n,text:d})}},Fr=U("slate:void"),Rr=function(e){function n(){var e,t,r;Ve(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=$e(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),Pr.call(r),$e(r,t)}return Je(n,e),We(n,[{key:"render",value:function(){var e=this.props,n=e.children,r=e.node,o=e.readOnly,a="block"==r.object?"div":"span",i=t.createElement(a,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText()),s=t.createElement(a,{contentEditable:!!o&&null},n);return this.debug("render",{props:e}),t.createElement(a,{"data-slate-void":!0,"data-key":r.key,contentEditable:!(!o&&"block"!=r.object)&&null},o?null:i,s)}}]),n}(t.Component);Rr.propTypes={block:ae.block,children:de.any.isRequired,editor:de.object.isRequired,node:ae.node.isRequired,parent:ae.node.isRequired,readOnly:de.bool.isRequired};var Pr=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";Fr.apply(void 0,[t,""+i].concat(r))},this.renderText=function(){var n=e.props,r=n.block,o=n.decorations,a=n.node,i=n.readOnly,s=n.editor,u=a.getFirstText();return t.createElement(Nr,{block:"block"==a.object?a:r,decorations:o,editor:s,key:u.key,node:u,parent:a,readOnly:i})}};function Ar(e,t){var n=o.Set().asMutable(),r=[];return function(e,t){if(t.isEmpty())return e.nodes.toArray().map(function(e,t){return{child:e,index:t}});var n=ze({},e.key,0),r=1;e.forEachDescendant(function(e){n[e.key]=r,r+=1});var o=e.nodes.toArray(),a=o.map(function(e,t){return{child:e,index:t,order:n[e.key]}});return t.forEach(function(e){var t=n[e.startKey],i=void 0===t?0:function(e,t,n){var r=e.findIndex(function(e){return n<t[e.key]});if(r<=0)return 0;var o=e[r-1];return t[o.key]}(o,n,t);a.push({isRangeStart:!0,order:i-.5,decoration:e});var s=(n[e.endKey]||r)+.5;a.push({isRangeEnd:!0,order:s,decoration:e})}),a.sort(function(e,t){return e.order>t.order?1:-1})}(e,t).forEach(function(e){e.isRangeStart?n.add(e.decoration):e.isRangeEnd?n.remove(e.decoration):r.push(n.toList())}),r}var Ir=U("slate:node"),jr=function(e){function n(){var e,t,r;Ve(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=$e(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),Br.call(r),$e(r,t)}return Je(n,e),We(n,[{key:"render",value:function(){var e=this;this.debug("render",this);var n=this.props,r=n.editor,o=n.isSelected,a=n.isFocused,i=n.node,s=n.decorations,u=n.parent,c=n.readOnly,l=r.value.selection,d=r.stack,f=i.getSelectionIndexes(l,o),p=Ar(i,s.concat(i.getDecorations(d))),h=[];i.nodes.forEach(function(t,n){var r=!!f&&f.start<=n&&n<f.end;h.push(e.renderNode(t,r,p[n]))});var v={"data-key":i.key};"block"==i.object&&"block"!=i.nodes.first().object&&("rtl"==i.getTextDirection()&&(v.dir="rtl"));var y={key:i.key,editor:r,isFocused:a,isSelected:o,node:i,parent:u,readOnly:c},m=d.find("renderPlaceholder",y);m&&(m=t.cloneElement(m,{key:i.key+"-placeholder"}),h=[m].concat(Ge(h)));var g=d.find("renderNode",He({},y,{attributes:v,children:h}));return i.isVoid?t.createElement(Rr,this.props,g):g}}]),n}(t.Component);jr.propTypes={block:ae.block,decorations:wr.list.isRequired,editor:de.object.isRequired,isFocused:de.bool.isRequired,isSelected:de.bool.isRequired,node:ae.node.isRequired,parent:ae.node.isRequired,readOnly:de.bool.isRequired};var Br=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;Ir.apply(void 0,[t,i+" ("+s+")"].concat(r))},this.shouldComponentUpdate=function(t){var n=e.props,r=n.editor.stack.find("shouldNodeComponentUpdate",n,t),o=t,a=n;if(null!=r){if(r)return!0;!1===r&&Ke.warn("Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return o.readOnly!=a.readOnly||(o.node!=a.node||(!(!o.isSelected&&!a.isSelected)||(!(!o.isFocused&&!a.isFocused)||!o.decorations.equals(a.decorations))))},this.renderNode=function(n,r,o){var a=e.props,i=a.block,s=a.editor,u=a.node,c=a.readOnly,l=a.isFocused,d="text"==n.object?Nr:jr;return t.createElement(d,{block:"block"==u.object?u:i,decorations:o,editor:s,isSelected:r,isFocused:l&&r,key:n.key,node:n,parent:u,readOnly:c})}};function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;r.Node.isNode(e)&&(e=e.key);var n=t.document.querySelector('[data-key="'+e+'"]');if(!n)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return n}function _r(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Lr(e,n),o=0,a=void 0,i=n.document.createNodeIterator(r,NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1);a=i.nextNode();){var s=o+a.textContent.length;if(t<=s){var u=t-o;return{node:a,offset:u>=0?u:0}}o=s}return null}function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.anchorKey,r=e.anchorOffset,o=e.focusKey,a=e.focusOffset,i=e.isBackward,s=e.isCollapsed,u=_r(n,r,t),c=s?u:_r(o,a,t);if(!u||!c)return null;var l=t.document.createRange(),d=i?c:u,f=i?u:c;return l.setStart(d.node,d.offset),l.setEnd(f.node,f.offset),l}var qr=function(e){var t=e.anchorNode,n=e.anchorOffset,r=e.focusNode,o=e.focusOffset,a=t.compareDocumentPosition(r);return!(4===a||0===a&&n<o)},Kr="data-slate-zero-width",Ur="["+Kr+"]",Vr="data-offset-key",Wr="["+Vr+"]",zr="[data-key]",Hr="[data-slate-void]";function Jr(e,t,n){var r=function(e,t){if(1==e.nodeType&&e.childNodes.length){var n=t==e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=$r(e,o,r);1==e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=$r(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,t),o=r.node,a=r.offset,i=$t(e),s=o.parentNode,u=s.closest(Wr),c=void 0,l=void 0;if(u){var d=i.document.createRange(),f=u.closest(zr);d.setStart(f,0),d.setEnd(o,a),l=f,c=d.toString().length}else{var p=s.closest(Hr);if(!p)return null;if(!(u=p.querySelector(Wr)))return null;c=(l=u).textContent.length}c==l.textContent.length&&s.hasAttribute(Kr)&&c--;var h=u.getAttribute(Vr);if(!h)return null;var v=Or.parse(h).key;return n.document.hasDescendant(v)?{key:v,offset:c}:null}function $r(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8==o.nodeType||1==o.nodeType&&0==o.childNodes.length||1==o.nodeType&&"false"==o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"==n&&a++,"backward"==n&&a--);return o||null}function Xr(e,t){var n=e.anchorNode||e.startContainer;if(!n)return null;var o=$t(n);(e instanceof o.Range||o.StaticRange&&e instanceof o.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var a=e,i=a.anchorNode,s=a.anchorOffset,u=a.focusNode,c=a.focusOffset,l=a.isCollapsed,d=Jr(i,s,t),f=l?d:Jr(u,c,t);if(!d||!f)return null;if(_t||Mt){var p=_r(d.key,d.offset),h=_r(f.key,f.offset);e={anchorNode:p.node,anchorOffset:p.offset,focusNode:h.node,focusOffset:h.offset}}return r.Range.create({anchorKey:d.key,anchorOffset:d.offset,focusKey:f.key,focusOffset:f.offset,isBackward:!l&&qr(e),isFocused:!0})}var Gr=["auto","overlay","scroll"],Yr=Kt&&!!window.navigator.userAgent.match(/os 11_/i);function Zr(e){if(!Yr&&e.anchorNode){var t=$t(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(Gr.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n==t.document.body||n==t.document.documentElement,o=qr(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();Lt&&a.collapsed&&0==i.top&&0==i.height&&(0==a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0==(i=a.getBoundingClientRect()).top&&0==i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var s=void 0,u=void 0,c=void 0,l=void 0,d=0,f=0,p=0,h=0,v=0,y=0,m=0,g=0;if(r){s=t.innerWidth,u=t.innerHeight,c=t.pageYOffset,l=t.pageXOffset}else{var b=n.offsetWidth,C=n.offsetHeight,w=n.scrollTop,k=n.scrollLeft,O=t.getComputedStyle(n),E=O.borderTopWidth,x=O.borderBottomWidth,T=O.borderLeftWidth,S=O.borderRightWidth,N=O.paddingTop,D=O.paddingBottom,F=O.paddingLeft,R=O.paddingRight,P=n.getBoundingClientRect();s=b,u=C,d=P.top+parseInt(E,10),f=P.left+parseInt(T,10),p=parseInt(E,10)+parseInt(x,10),h=parseInt(T,10)+parseInt(S,10),v=parseInt(N,10),y=parseInt(D,10),m=parseInt(F,10),g=parseInt(R,10),c=w,l=k}var A=i.top+c-d,I=i.left+l-f,j=l,B=c;I<l?j=I-m:I+i.width+h>l+s&&(j=I+h+g-s),A<c?B=A-v:A+i.height+p>c+u&&(B=A+p+y+i.height-u),r?t.scrollTo(j,B):(n.scrollTop=B,n.scrollLeft=j)}}function Qr(e){var t=window.document;if(t&&t.body.createTextRange){var n=t.body.createTextRange();n.collapse(),n.select()}else e.removeAllRanges()}var eo=U("slate:content"),to=function(e){function n(e){Ve(this,n);var r=$e(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.componentDidMount=function(){$t(r.element).document.addEventListener("selectionchange",r.onNativeSelectionChange),(Kt||qt)&&Vt.beforeinput&&r.element.addEventListener("beforeinput",r.onNativeBeforeInput),r.updateSelection()},r.componentDidUpdate=function(){r.updateSelection()},r.updateSelection=function(){var e=r.props.editor.value.selection,t=e.isBackward,n=$t(r.element),o=n.getSelection(),a=o.rangeCount,i=o.anchorNode;if(a||!e.isBlurred){if(e.isBlurred){if(!r.isInEditor(i))return;return Qr(o),r.element.blur(),void eo("updateSelection",{selection:e,native:o})}if(!e.isUnset){var s=!!a&&o.getRangeAt(0),u=Mr(e,n);if(u){var c=u.startContainer,l=u.startOffset,d=u.endContainer,f=u.endOffset;s&&(c==s.startContainer&&l==s.startOffset&&d==s.endContainer&&f==s.endOffset||c==s.endContainer&&l==s.endOffset&&d==s.startContainer&&f==s.startOffset)||(r.tmp.isUpdatingSelection=!0,Qr(o),o.setBaseAndExtent?t?o.setBaseAndExtent(u.endContainer,u.endOffset,u.startContainer,u.startOffset):o.setBaseAndExtent(u.startContainer,u.startOffset,u.endContainer,u.endOffset):o.addRange(u),Zr(o),setTimeout(function(){Bt&&r.element&&r.element.focus(),r.tmp.isUpdatingSelection=!1}),eo("updateSelection",{selection:e,native:o}))}else Ke.error("Unable to find a native DOM range from the current selection.",{selection:e})}}},r.ref=function(e){r.element=e},r.isInEditor=function(e){var t=r.element,n=3===e.nodeType?e.parentNode:e;return n.isContentEditable&&(n===t||n.closest("[data-slate-editor]")===t)},r.onNativeBeforeInput=function(e){if(!r.props.readOnly&&r.isInEditor(e.target)){var t=e.getTargetRanges(),n=Xe(t,1)[0];if(n){var o=r.props.editor;switch(e.inputType){case"deleteContentBackward":e.preventDefault();var a=Xr(n,o.value);o.change(function(e){return e.deleteAtRange(a)});break;case"insertLineBreak":case"insertParagraph":e.preventDefault();var i=Xr(n,o.value);o.change(function(e){e.value.isInVoid?e.collapseToStartOfNextText():e.splitBlockAtRange(i)});break;case"insertReplacementText":case"insertText":var s=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==s)return;e.preventDefault();var u=o.value,c=u.selection,l=Xr(n,u);o.change(function(e){e.insertTextAtRange(l,s,c.marks),c.marks&&u.document!=e.value.document&&e.select({marks:null})})}}}},r.onNativeSelectionChange=fr(function(e){r.props.readOnly||$t(e.target).document.activeElement===r.element&&r.props.onSelect(e)},100),r.renderNode=function(e,n,o){var a=r.props,i=a.editor,s=a.readOnly,u=i.value,c=u.document,l=u.isFocused;return t.createElement(jr,{block:null,editor:i,decorations:o,isSelected:n,isFocused:l&&n,key:e.key,node:e,parent:c,readOnly:s})},r.tmp={},r.tmp.isUpdatingSelection=!1,Ue.forEach(function(e){r[e]=function(t){r.onEvent(e,t)}}),r}return Je(n,e),We(n,[{key:"componentWillUnmount",value:function(){var e=$t(this.element);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),(Kt||qt)&&Vt.beforeinput&&this.element.removeEventListener("beforeinput",this.onNativeBeforeInput)}},{key:"onEvent",value:function(e,t){if(eo("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!=e&&"onBlur"!=e&&"onFocus"!=e){if("onSelect"==e){var n=this.props.editor.value,r=n.selection,o=Xr($t(t.target).getSelection(),n);if(o&&o.equals(r))return void this.updateSelection()}if("onDragEnd"==e||"onDragEnter"==e||"onDragExit"==e||"onDragLeave"==e||"onDragOver"==e||"onDragStart"==e||"onDrop"==e)if(t.target.closest("[data-slate-editor]")!==this.element)return;("onBeforeInput"!=e&&"onBlur"!=e&&"onCompositionEnd"!=e&&"onCompositionStart"!=e&&"onCopy"!=e&&"onCut"!=e&&"onFocus"!=e&&"onInput"!=e&&"onKeyDown"!=e&&"onKeyUp"!=e&&"onPaste"!=e&&"onSelect"!=e||this.isInEditor(t.target))&&this.props[e](t)}}},{key:"render",value:function(){var e=this,n=this.props,r=n.className,o=n.readOnly,a=n.editor,i=n.tabIndex,s=n.role,u=n.tagName,c=n.spellCheck,l=a.value,d=a.stack,f=u,p=l.document,h=l.selection,v=l.decorations,y=p.getSelectionIndexes(h),m=Ar(p,p.getDecorations(d).concat(v||[])),g=p.nodes.toArray().map(function(t,n){var r=!!y&&y.start<=n&&n<y.end;return e.renderNode(t,r,m[n])}),b=Ue.reduce(function(t,n){return t[n]=e[n],t},{}),C=He({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},o?{}:{WebkitUserModify:"read-write-plaintext-only"},n.style);return eo("render",{props:n}),t.createElement(f,He({},b,{"data-slate-editor":!0,ref:this.ref,"data-key":p.key,contentEditable:!o||null,suppressContentEditableWarning:!0,className:r,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onCopy:this.onCopy,onCut:this.onCut,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onDrop,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste,onSelect:this.onSelect,autoCorrect:n.autoCorrect?"on":"off",spellCheck:c,style:C,role:o?null:s||"textbox",tabIndex:i,"data-gramm":!1}),g,this.props.children)}}]),n}(t.Component);to.propTypes={autoCorrect:de.bool.isRequired,children:de.any.isRequired,className:de.string,editor:de.object.isRequired,readOnly:de.bool.isRequired,role:de.string,spellCheck:de.bool.isRequired,style:de.object,tabIndex:de.number,tagName:de.string},to.defaultProps={style:{},tagName:"div"},Ue.forEach(function(e){to.propTypes[e]=de.func.isRequired});var no={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},ro=no.FRAGMENT,oo=no.HTML,ao=no.TEXT;function io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fragment,r=$t(e.target),o=r.getSelection(),a=t.startKey,i=t.endKey,s=t.document.getClosestVoid(a),u=t.document.getClosestVoid(i);if(!o.isCollapsed||s){var c=nt.serializeNode(n),l=o.getRangeAt(0),d=l.cloneContents(),f=d.childNodes[0];if(d.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(f=e)}),u){var p=l.cloneRange(),h=Lr(u,r);p.setEndAfter(h),d=p.cloneContents()}if(s&&(f=d.childNodes[0].childNodes[1].firstChild),[].slice.call(d.querySelectorAll(Ur)).forEach(function(e){var t="n"===e.getAttribute(Kr);e.textContent=t?"\n":""}),3==f.nodeType){var v=r.document.createElement("span");v.style.whiteSpace="pre",v.appendChild(f),d.appendChild(v),f=v}f.setAttribute("data-slate-fragment",c);var y=r.document.createElement("div");if(y.appendChild(d),e.clipboardData&&e.clipboardData.setData&&!_t)return e.preventDefault(),e.clipboardData.setData(ao,y.textContent),e.clipboardData.setData(ro,c),void e.clipboardData.setData(oo,y.innerHTML);var m=e.target.closest("[data-slate-editor]");y.setAttribute("contenteditable",!0),y.style.position="absolute",y.style.left="-9999px",m.appendChild(y),o.selectAllChildren(y),r.requestAnimationFrame(function(){m.removeChild(y),Qr(o),o.addRange(l)})}}function so(e,t){var n=e.closest("[data-key]");if(!n)return null;var r=n.getAttribute("data-key");return r&&t.document.getNode(r)||null}function uo(e,t){e.nativeEvent&&(e=e.nativeEvent);var n=e,o=n.x,a=n.y,i=n.target;if(null==o||null==a)return null;var s=t.document,u=so(i,t);if(!u)return null;if(u.isVoid){var c=i.getBoundingClientRect(),l="inline"==u.object?o-c.left<c.left+c.width-o:a-c.top<c.top+c.height-a,d=u.getFirstText(),f=r.Range.create();if(l){var p=s.getPreviousText(d.key);if(p)return f.moveToEndOf(p)}var h=s.getNextText(d.key);return h?f.moveToStartOf(h):null}var v=$t(i),y=void 0;if(v.document.caretRangeFromPoint)y=v.document.caretRangeFromPoint(o,a);else if(v.document.caretPositionFromPoint){var m=v.document.caretPositionFromPoint(o,a);(y=v.document.createRange()).setStart(m.offsetNode,m.offset),y.setEnd(m.offsetNode,m.offset)}else if(v.document.body.createTextRange){y=v.document.body.createTextRange();try{y.moveToPoint(o,a)}catch(e){return null}}var g=Xr(y,t);return g||null}var co=no.FRAGMENT,lo=no.HTML,fo=no.NODE,po=no.RICH,ho=no.TEXT,vo=/ data-slate-fragment="([^\s"]+)"/;function yo(e){!_t&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=mo(t,co),r=mo(t,fo),o=mo(t,lo),a=mo(t,po),i=mo(t,ho),s=void 0;if(!n&&o&&~o.indexOf(' data-slate-fragment="')){var u=vo.exec(o),c=Xe(u,2),l=(c[0],c[1]);l&&(n=l)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!=t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[co]&&(n=d[co]),d[fo]&&(r=d[fo]),d[ho]&&(i=d[ho])}n&&(n=nt.deserializeNode(n)),r&&(r=nt.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(s=Array.from(t.files))}catch(e){t.files&&t.files.length&&(s=Array.from(t.files))}var f={files:s,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function mo(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t==ho&&e.getData("Text")||null}var go=no.TEXT;function bo(e,t,n){var r=no[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(go),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[go]=i;s[r]=n;var u=""+a+JSON.stringify(s);o.setData(go,u)}}var Co=U("slate:after");function wo(){var e=null;return{onBeforeInput:function(e,t,n){Co("onBeforeInput",{event:e}),e.preventDefault(),t.insertText(e.data)},onBlur:function(e,t,n){Co("onBlur",{event:e}),t.blur()},onClick:function(e,t,n){if(n.props.readOnly)return!0;var r=t.value,o=r.document,a=so(e.target,r);a&&(a.isVoid||o.hasVoidParent(a.key))&&t.focus().collapseToEndOf(a),Co("onClick",{event:e})},onCopy:function(e,t,n){Co("onCopy",{event:e}),io(e,t.value)},onCut:function(e,t,n){Co("onCut",{event:e}),io(e,t.value),$t(e.target).requestAnimationFrame(function(){var e=t.value,r=e.endBlock,o=e.endInline,a=e.isCollapsed,i=r&&r.isVoid&&a,s=o&&o.isVoid&&a;i?n.change(function(e){return e.removeNodeByKey(r.key)}):s?n.change(function(e){return e.removeNodeByKey(o.key)}):n.change(function(e){return e.delete()})})},onDragEnd:function(t,n,r){Co("onDragEnd",{event:t}),e=null},onDragOver:function(e,t,n){Co("onDragOver",{event:e})},onDragStart:function(t,n,r){Co("onDragStart",{event:t}),e=!0;var o=n.value,a=o.document,i=so(t.target,o);if(i&&(i.isVoid||a.hasVoidParent(i.key)))bo(t,"node",nt.serializeNode(i,{preserveKeys:!0}));else{var s=o.fragment;bo(t,"fragment",nt.serializeNode(s))}},onDrop:function(t,n,o){Co("onDrop",{event:t});var a=n.value,i=a.document,s=a.selection,u=$t(t.target),c=uo(t,a);if(c){var l=yo(t),d=l.type,f=l.fragment,p=l.node,h=l.text;if(n.focus(),e&&s.endKey==c.endKey&&s.endOffset<c.endOffset&&(c=c.move(s.startKey==s.endKey?0-s.endOffset+s.startOffset:0-s.endOffset)),e&&n.delete(),n.select(c),"text"==d||"html"==d){var v=c.anchorKey,y=i.hasVoidParent(v);if(y){for(var m=i.getNode(v);y&&(m=i.getNextText(m.key));)y=i.hasVoidParent(m.key);m&&n.collapseToStartOf(m)}h&&h.split("\n").forEach(function(e,t){t>0&&n.splitBlock(),n.insertText(e)})}"fragment"==d&&n.insertFragment(f),"node"==d&&r.Block.isBlock(p)&&n.insertBlock(p.regenerateKey()).removeNodeByKey(p.key),"node"==d&&r.Inline.isInline(p)&&n.insertInline(p.regenerateKey()).removeNodeByKey(p.key);var g=Lr(i.getNode(c.focusKey),u);g&&g.dispatchEvent(new MouseEvent("mouseup",{view:u,bubbles:!0,cancelable:!0}))}},onInput:function(e,t,n){Co("onInput",{event:e});var r=$t(e.target),o=t.value,a=r.getSelection().anchorNode,i=Jr(a,0,o);if(i){var s=o.document,u=o.selection,c=s.getDescendant(i.key),l=s.getClosestBlock(c.key),d=c.getLeaves(),f=l.getLastText(),p=d.last(),h=0,v=0,y=d.find(function(e){if(h=v,(v+=e.text.length)>i.offset)return!0})||p,m=y.text,g=a.textContent,b=c==f,C=y==p,w=g.charAt(g.length-1);if(b&&C&&"\n"==w&&(g=g.slice(0,-1)),g!=m){var k=g.length-m.length,O=u.collapseToEnd().move(k),E=u.moveAnchorTo(i.key,h).moveFocusTo(i.key,v);t.insertTextAtRange(E,g,y.marks).select(O)}}},onKeyDown:function(e,t,n){Co("onKeyDown",{event:e});var r=t.value;if(An.isSplitBlock(e)&&!Kt)return r.isInVoid?t.collapseToStartOfNextText():t.splitBlock();if(An.isDeleteCharBackward(e)&&!Kt)return t.deleteCharBackward();if(An.isDeleteCharForward(e)&&!Kt)return t.deleteCharForward();if(An.isDeleteLineBackward(e))return t.deleteLineBackward();if(An.isDeleteLineForward(e))return t.deleteLineForward();if(An.isDeleteWordBackward(e))return t.deleteWordBackward();if(An.isDeleteWordForward(e))return t.deleteWordForward();if(An.isRedo(e))return t.redo();if(An.isUndo(e))return t.undo();if(An.isCollapseLineBackward(e))return e.preventDefault(),t.collapseLineBackward();if(An.isCollapseLineForward(e))return e.preventDefault(),t.collapseLineForward();if(An.isExtendLineBackward(e))return e.preventDefault(),t.extendLineBackward();if(An.isExtendLineForward(e))return e.preventDefault(),t.extendLineForward();if(An.isCollapseCharBackward(e)){var o=r.document,a=r.isInVoid,i=r.previousText,s=r.startText,u=i&&o.hasVoidParent(i.key);if(a||u||""==s.text)return e.preventDefault(),t.collapseCharBackward()}if(An.isCollapseCharForward(e)){var c=r.document,l=r.isInVoid,d=r.nextText,f=r.startText,p=d&&c.hasVoidParent(d.key);if(l||p||""==f.text)return e.preventDefault(),t.collapseCharForward()}if(An.isExtendCharBackward(e)){var h=r.document,v=r.isInVoid,y=r.previousText,m=r.startText,g=y&&h.hasVoidParent(y.key);if(v||g||""==m.text)return e.preventDefault(),t.extendCharBackward()}if(An.isExtendCharForward(e)){var b=r.document,C=r.isInVoid,w=r.nextText,k=r.startText,O=w&&b.hasVoidParent(w.key);if(C||O||""==k.text)return e.preventDefault(),t.extendCharForward()}},onPaste:function(e,t,n){Co("onPaste",{event:e});var r=yo(e),o=r.type,a=r.fragment,i=r.text;if("fragment"==o&&t.insertFragment(a),"text"==o||"html"==o){if(!i)return;var s=t.value,u=s.document,c=s.selection,l=s.startBlock;if(l.isVoid)return;var d=l,f=u.getInsertMarksAtRange(c),p=at.deserialize(i,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(p)}},onSelect:function(e,t,n){Co("onSelect",{event:e});var r=$t(e.target),o=t.value,a=o.document,i=r.getSelection();if(i.rangeCount){var s=Xr(i,o);if(s){var u=s,c=u.anchorKey,l=u.anchorOffset,d=u.focusKey,f=u.focusOffset,p=a.getNode(c),h=a.getNode(d),v=a.getClosestInline(c),y=a.getClosestInline(d),m=a.getClosestBlock(d),g=a.getClosestBlock(c);if(g&&!g.isVoid&&0==l&&m&&m.isVoid&&0!=f&&(s=s.set("focusOffset",0)),v&&!v.isVoid&&l==p.text.length){var b=a.getClosestBlock(c).getNextText(c);b&&(s=s.moveAnchorTo(b.key,0))}if(y&&!y.isVoid&&f==h.text.length){var C=a.getClosestBlock(d).getNextText(d);C&&(s=s.moveFocusTo(C.key,0))}s=s.normalize(a),t.select(s)}}else t.blur()},renderEditor:function(e,n){var r=Ue.reduce(function(e,t){return e[t]=n[t],e},{});return t.createElement(to,He({},r,{autoCorrect:e.autoCorrect,className:e.className,children:e.children,editor:n,readOnly:e.readOnly,role:e.role,spellCheck:e.spellCheck,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName}))},renderNode:function(e){var n=e.attributes,r=e.children,o=e.node;if("block"==o.object||"inline"==o.object){var a="block"==o.object?"div":"span";return t.createElement(a,He({},n,{style:{position:"relative"}}),r)}},renderPlaceholder:function(e){var n=e.editor,o=e.node;if(n.props.placeholder&&!n.state.isComposing&&"block"==o.object&&r.Text.isTextList(o.nodes)&&""==o.text&&!(n.value.document.getBlocks().size>1))return t.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"}},n.props.placeholder)}}}var ko=U("slate:before");function Oo(){var e=null,t=0,r=!1,o=!1,a=!1;return{onBeforeInput:function(e,t,n){return!!n.props.readOnly||!(!Kt&&!qt||!Vt.beforeinput)||void ko("onBeforeInput",{event:e})},onBlur:function(t,r,a){if(o)return!0;if(a.props.readOnly)return!0;var i=r.value,s=t.relatedTarget,u=t.target,c=$t(u);if(e==c.document.activeElement)return!0;if(s){var l=n.findDOMNode(a);if(s==l)return!0;if(s.hasAttribute("data-slate-spacer"))return!0;var d=so(s,i);if(l.contains(s)&&d&&!d.isVoid)return!0}ko("onBlur",{event:t})},onChange:function(e,t){e.value.schema!=t.schema&&e.setValue({schema:t.schema},{save:!1}).normalize(),ko("onChange")},onCompositionEnd:function(e,n,o){var a=t;window.requestAnimationFrame(function(){t>a||(r=!1,o.state.isComposing&&o.setState({isComposing:!1}))}),ko("onCompositionEnd",{event:e})},onCompositionStart:function(e,n,o){r=!0,t++,o.state.isComposing||o.setState({isComposing:!0}),ko("onCompositionStart",{event:e})},onCopy:function(e,t,n){var r=$t(e.target);o=!0,r.requestAnimationFrame(function(){return o=!1}),ko("onCopy",{event:e})},onCut:function(e,t,n){if(n.props.readOnly)return!0;var r=$t(e.target);o=!0,r.requestAnimationFrame(function(){return o=!1}),ko("onCut",{event:e})},onDragEnd:function(e,t,n){a=!1,ko("onDragEnd",{event:e})},onDragEnter:function(e,t,n){ko("onDragEnter",{event:e})},onDragExit:function(e,t,n){ko("onDragExit",{event:e})},onDragLeave:function(e,t,n){ko("onDragLeave",{event:e})},onDragOver:function(e,t,n){so(e.target,n.value).isVoid&&e.preventDefault(),_t&&e.preventDefault(),a||(a=!0,_t||(e.nativeEvent.dataTransfer.dropEffect="move")),ko("onDragOver",{event:e})},onDragStart:function(e,t,n){a=!0,ko("onDragStart",{event:e})},onDrop:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),ko("onDrop",{event:e})},onFocus:function(t,r,a){if(o)return!0;if(a.props.readOnly)return!0;var i=n.findDOMNode(a),s=$t(t.target);if(e=s.document.activeElement,Bt&&t.target!=i)return i.focus(),!0;ko("onFocus",{event:t})},onInput:function(e,t,n){return!!r||!!t.value.isBlurred||void ko("onInput",{event:e})},onKeyDown:function(e,t,n){return!!n.props.readOnly||(r?(An.isComposing(e)&&e.preventDefault(),!0):(An.isContentEditable(e)&&!Kt&&e.preventDefault(),void ko("onKeyDown",{event:e})))},onPaste:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),ko("onPaste",{event:e})},onSelect:function(t,n,a){if(o)return!0;if(r)return!0;if(a.props.readOnly)return!0;var i=$t(t.target);e=i.document.activeElement,ko("onSelect",{event:t})}}}var Eo=U("slate:editor"),xo=function(e){function n(e){Ve(this,n);var t=$e(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));To.call(t),t.state={},t.tmp={},t.tmp.updates=0,t.tmp.resolves=0;var o=t.resolvePlugins(e.plugins,e.schema),a=r.Stack.create({plugins:o}),i=r.Schema.create({plugins:o});t.state.schema=i,t.state.stack=a;var s=e.value.change();return a.run("onChange",s,t),t.queueChange(s),t.state.value=s.value,Ue.forEach(function(e){t[e]=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t.onEvent.apply(t,[e].concat(r))}}),t}return Je(n,e),We(n,[{key:"render",value:function(){Eo("render",this);var e=this.stack.map("renderPortal",this.value,this).map(function(e,n){return t.createElement(ee,{key:n,isOpened:!0},e)}),n=He({},this.props,{children:e});return this.stack.render("renderEditor",n,this)}},{key:"schema",get:function(){return this.state.schema}},{key:"stack",get:function(){return this.state.stack}},{key:"value",get:function(){return this.state.value}}]),n}(t.Component);xo.propTypes={autoCorrect:de.bool,autoFocus:de.bool,className:de.string,onChange:de.func,placeholder:de.any,plugins:de.array,readOnly:de.bool,role:de.string,schema:de.object,spellCheck:de.bool,style:de.object,tabIndex:de.number,value:ae.value.isRequired},xo.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},plugins:[],readOnly:!1,schema:{},spellCheck:!0};var To=function(){var e=this;this.componentWillReceiveProps=function(t){var n=e.schema,o=e.stack;if(e.tmp.updates++,t.plugins!=e.props.plugins||t.schema!=e.props.schema){var a=e.resolvePlugins(t.plugins,t.schema);o=r.Stack.create({plugins:a}),n=r.Schema.create({plugins:a}),e.setState({schema:n,stack:o}),e.tmp.resolves++,e.tmp.resolves>5&&e.tmp.resolves==e.tmp.updates&&Ke.warn("A Slate <Editor> is re-resolving `props.plugins` or `props.schema` on each update, which leads to poor performance. This is often due to passing in a new `schema` or `plugins` prop with each render by declaring them inline in your render function. Do not do this!")}var i=t.value.change();o.run("onChange",i,e),e.queueChange(i),e.setState({value:i.value})},this.componentDidMount=function(){e.flushChange(),e.props.autoFocus&&e.focus()},this.componentDidUpdate=function(){e.flushChange()},this.queueChange=function(t){t.operations.size&&(Eo("queueChange",{change:t}),e.tmp.change=t)},this.flushChange=function(){var t=e.tmp.change;t&&(Eo("flushChange",{change:t}),delete e.tmp.change,e.props.onChange(t))},this.change=function(){var t,n=(t=e.value.change()).call.apply(t,arguments);e.onChange(n)},this.blur=function(){e.change(function(e){return e.blur()})},this.focus=function(){e.change(function(e){return e.focus()})},this.onEvent=function(t,n){e.change(function(r){e.stack.run(t,n,r,e)})},this.onChange=function(t){Eo("onChange",{change:t}),e.stack.run("onChange",t,e);var n=t.value,r=e.props.onChange;n!=e.value&&r(t)},this.resolvePlugins=function(t,n){var r=Oo(),o=wo(),a={schema:n||{}},i=function(t){return"onChange"==t?"continue":"schema"==t?"continue":void(a[t]=function(){var n;return e.props[t]&&(n=e.props)[t].apply(n,arguments)})},s=!0,u=!1,c=void 0;try{for(var l,d=Ye[Symbol.iterator]();!(s=(l=d.next()).done);s=!0)i(l.value)}catch(e){u=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}return[r,a].concat(Ge(t||[]),[o])}},So=!0,No=!1,Do=void 0;try{for(var Fo,Ro=Ue[Symbol.iterator]();!(So=(Fo=Ro.next()).done);So=!0){var Po=Fo.value;xo.propTypes[Po]=de.func}}catch(e){No=!0,Do=e}finally{try{!So&&Ro.return&&Ro.return()}finally{if(No)throw Do}}var Ao={Editor:xo,cloneFragment:io,findDOMNode:Lr,findDOMRange:Mr,findNode:so,findRange:Xr,getEventRange:uo,getEventTransfer:yo,setEventTransfer:bo,AfterPlugin:wo,BeforePlugin:Oo};e.Editor=xo,e.cloneFragment=io,e.findDOMNode=Lr,e.findDOMRange=Mr,e.findNode=so,e.findRange=Xr,e.getEventRange=uo,e.getEventTransfer=yo,e.setEventTransfer=bo,e.AfterPlugin=wo,e.BeforePlugin=Oo,e.default=Ao,Object.defineProperty(e,"__esModule",{value:!0})});
